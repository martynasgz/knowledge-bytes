# Network

Ensures data goes from one endpoint to the next (*end-to-end*) via the *hops* made with the data link layer.  
IP addressing scheme - 32 bits, represented as 4 octets.  
Every host is identified by its IP address, these IP addresses allow data to go *end-to-end*:  
![end-to-end](/assets/2025-08-15-21-09-36.png)

## Data Flow

**The reason we have two types of addresses** is because they serve different purposes. MAC addresses are *hop-to-hop*, whereas IPs - *end-to-end*.
Let's say the host with the IP address `10.1.1.11` wants to send data to the host `10.8.8.88` in the [[#Network|initial picture]]. That data is just a bunch of 1 and 0s - layer 2 & 3 don't know how to interpret it, their goal is to just transfer them:
1. Initially, since `10.1.1.11` knows it needs to get to that host, it's going to save that layer 3 information in the data. That information is going to include source and destination IP addresses:  
  `10.1.1.11 -> 10.8.8.88`
2. Now, the computer knows, that the first step will be getting the data to the first router, so it adds the source and destination MAC addresses too - layer 2 information:  
  `a1a1 -> b2b2`  
  `10.1.1.11 -> 10.8.8.88`
3. Once the data gets to the first router, we can remove the layer 2 information, and gather the next *hop's* information.
4. This way move through the routers, until we reach the host. Once we do that, the layer 3 information can also be removed, since we reached the goal.

## Devices

Anything with an IP address is considered to be of layer 3 in the OSI model.

### Multilayer Switch (MLS)

Provides normal [[2-data-link| layer 2]] network switching services, but also allows layer 3 or higher OSI model services. The most common MLS is a layer 3 switch. It not only utilizes an ASIC chip for switching, but it also routes. This allows passing data to non-local network devices.

### Router

Routers facilitate communication **between** networks - the main difference vs. switches. They provide a traffic control point, i.e. security, filtering, redirecting.  
Routers learn which networks they are attached to. The knowledge of each of these networks, are called **routes**. They're stored in the router's routing table - all networks it knows about. The knowledge is actually represented as IP addresses in each network the router is attached to:  
![route example](/assets/2025-08-15-20-04-24.png)  
In the example above, the router is attached to networks `172.16.20.x` & `172.16.30.x`. As the priors interface, it is given the IP address `172.16.20.1`. For the network `172.16.30.x`, it's given `172.16.30.254`. These IP addresses are called **gateways** - each host's way out of their local network.  
For example, if host `.33` wants to send data to the other network, it knows it has to go through a router. The IP address of that router is stored as that host's default gateway. In this case - `.1`


[//begin]: # "Autogenerated link references for markdown compatibility"
[data-link| layer 2]: data-link.md "Data Link"
[//end]: # "Autogenerated link references"
